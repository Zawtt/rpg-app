import{c as f,a as _,u as P,r as m,j as e,S as w,X as D}from"./index-BxyrPdyw.js";import{P as v,S as B,E as F}from"./settings-BOrRkXB4.js";import{P as T}from"./plus-B4I-7Dc4.js";import{S as R}from"./save-DBX8JKZ-.js";import{C as y}from"./clock-DP9e3d7p.js";import{T as I}from"./trash-2-B_f98HJz.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],q=f("book",V);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],W=f("shield",U);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],X=f("sword",Z);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],O=f("zap",G);function se(){const{abilities:o,setAbilities:x,showToast:u}=_();P();const[i,p]=m.useState(null),[a,d]=m.useState(null),[c,L]=m.useState(!1),j=m.useRef(null),[l,b]=m.useState({name:"",cost:"",description:"",cooldown:""});m.useEffect(()=>{const r=t=>{j.current&&!j.current.contains(t.target)&&d(null)},s=t=>{t.key==="Escape"&&d(null)};return document.addEventListener("mousedown",r),document.addEventListener("keydown",s),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("keydown",s)}},[a]);const g=r=>{const{name:s,value:t}=r.target;b(n=>({...n,[s]:t}))},N=()=>{const{name:r,cost:s,description:t,cooldown:n}=l;return r.trim()&&s.trim()&&t.trim()&&n.trim()&&!isNaN(parseInt(n))},$=()=>{if(!N()){alert("Por favor, preencha todos os campos corretamente.");return}const r=parseInt(l.cooldown);if(r<0){alert("O cooldown deve ser um número positivo.");return}if(i!==null){const s=o.map((t,n)=>n===i?{...t,name:l.name.trim(),cost:l.cost.trim(),description:l.description.trim(),cooldown:r,maxCooldown:r}:t);x(s),p(null),u("Habilidade atualizada com sucesso!","success")}else{const s={id:Date.now()+Math.random(),name:l.name.trim(),cost:l.cost.trim(),description:l.description.trim(),cooldown:r,maxCooldown:r,currentCooldown:0,isOnCooldown:!1};x([...o,s]),u("Nova habilidade criada!","success")}b({name:"",cost:"",description:"",cooldown:""})},C=r=>{if(r<0||r>=o.length)return;p(r);const s=o[r];b({name:s.name||"",cost:s.cost||"",description:s.description||"",cooldown:(s.maxCooldown||s.cooldown||"").toString()})},k=()=>{p(null),b({name:"",cost:"",description:"",cooldown:""})},z=r=>{if(r<0||r>=o.length)return;const s=o.filter((t,n)=>n!==r);x(s),u("Habilidade removida","success"),i===r?k():i!==null&&i>r&&p(t=>t-1),a===r?d(null):a!==null&&a>r&&d(t=>t-1)},S=r=>{if(r<0||r>=o.length)return;const s=o[r];if(!s.isOnCooldown){const t=o.map((n,h)=>h===r?{...n,isOnCooldown:!0,currentCooldown:n.maxCooldown||n.cooldown||0}:n);x(t),u(`${s.name} ativada! Cooldown iniciado.`,"info")}},E=r=>{if(r<0||r>=o.length)return;const s=o.map((t,n)=>{if(n===r&&t.isOnCooldown){const h=Math.max(0,(t.currentCooldown||0)-1),A=h>0;return A||u(`${t.name} está disponível novamente!`,"success"),{...t,currentCooldown:h,isOnCooldown:A}}return t});x(s)},H=(r,s)=>{s.stopPropagation(),r>=0&&r<o.length&&d(r)},M=m.useCallback(()=>{const r=[O,W,X,w],s=r[Math.floor(Math.random()*r.length)];return e.jsx(s,{size:16})},[]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"abilities-container bg-gray-900/90 backdrop-blur-sm rounded-lg border border-gray-800 shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsxs("h3",{className:"text-2xl font-medium font-storm-gust text-white flex items-center gap-3",children:[e.jsx(w,{size:24,className:"text-purple-500"}),"HABILIDADES"]}),e.jsx("div",{className:"w-20 h-0.5 bg-purple-500 mt-2"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"form-container bg-gray-800/80 rounded-lg border border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i!==null?e.jsx(v,{size:20,className:"text-amber-500"}):e.jsx(T,{size:20,className:"text-gray-400"}),e.jsx("h4",{className:"text-lg font-medium font-medieval text-amber-100",children:i!==null?"EDITAR HABILIDADE":"NOVA HABILIDADE"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 uppercase tracking-wider mb-2",children:"Nome *"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:g,className:"w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors text-sm",placeholder:"ex: Chidori",maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 uppercase tracking-wider mb-2",children:"Custo *"}),e.jsx("input",{type:"text",name:"cost",value:l.cost,onChange:g,className:"w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors text-sm",placeholder:"ex: 15 mana",maxLength:20})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 uppercase tracking-wider mb-2",children:"Turnos *"}),e.jsx("input",{type:"number",name:"cooldown",value:l.cooldown,onChange:g,min:"0",max:"99",className:"w-full px-4 py-3 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors text-sm",placeholder:"3"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Descrição *"}),e.jsx("textarea",{name:"description",value:l.description,onChange:g,rows:"4",className:"w-full px-4 py-3 font-medieval bg-gray-800/80 border border-amber-600/50 rounded text-amber-100 focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 transition-colors text-sm resize-y min-h-[100px] break-words word-break-break-word overflow-wrap-break-word hyphens-auto placeholder-amber-400/60",style:{whiteSpace:"pre-line",wordBreak:"break-word",overflowWrap:"break-word"},placeholder:"Descreva o efeito da habilidade..."}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[l.description.length," caracteres"]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-5",children:[e.jsxs("button",{onClick:$,disabled:!N(),className:"flex-1 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-gray-100 font-medium rounded transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(R,{size:16}),i!==null?"ATUALIZAR":"CRIAR"]}),i!==null&&e.jsx("button",{onClick:k,className:"px-4 py-3 bg-gray-700 hover:bg-gray-600 text-gray-400 rounded transition-colors",children:e.jsx(D,{size:16})})]})]}),e.jsxs("div",{className:"abilities-list",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-medium font-medieval text-amber-100",children:"HABILDADES"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:[o.length," habilidade",o.length!==1?"s":""]}),e.jsxs("button",{onClick:()=>L(!c),className:`p-2 rounded-lg transition-all flex items-center gap-2 text-sm ${c?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-gray-700 text-gray-400 hover:bg-gray-600 hover:text-gray-300"}`,title:c?"Sair do modo edição":"Entrar no modo edição",children:[e.jsx(B,{size:16}),c?"Sair":"Editar"]})]})]}),o.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx(w,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma habilidade criada"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Crie sua primeira habilidade de combate"})]}):e.jsx("div",{className:"space-y-2",children:o.map((r,s)=>e.jsxs("div",{className:`group relative bg-gray-800/60 border rounded-lg transition-all duration-300 overflow-hidden ${r.isOnCooldown?"border-gray-700 bg-gray-850/60 opacity-70":"border-gray-700 hover:border-purple-500/50 hover:bg-gray-800/80 cursor-pointer"}`,onClick:t=>{t.target.closest(".action-buttons")||c||(r.isOnCooldown?E(s):S(s))},children:[r.isOnCooldown&&e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10",children:e.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg px-3 py-1 backdrop-blur-sm",children:[e.jsx("div",{className:"text-lg font-bold text-red-400 text-center",children:r.currentCooldown||0}),e.jsx("div",{className:"text-xs text-red-300 text-center",children:"turnos"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"text-purple-400 flex-shrink-0",children:M()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-medium font-storm-gust text-amber-100 truncate",children:r.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:r.cost}),e.jsxs("span",{className:"text-sm text-gray-400 flex items-center gap-1",children:[e.jsx(y,{size:12}),r.maxCooldown||r.cooldown||0,"T"]})]})]})]}),c&&e.jsxs("div",{className:"action-buttons flex gap-2 ml-4",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),C(s)},className:"bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/40 text-blue-300 hover:text-blue-200 p-2 rounded-md transition-all",title:"Editar habilidade",children:e.jsx(v,{size:14})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),confirm(`Deseja realmente deletar "${r.name}"?`)&&z(s)},className:"bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 text-red-300 hover:text-red-200 p-2 rounded-md transition-all",title:"Deletar habilidade",children:e.jsx(I,{size:14})})]}),!c&&e.jsx("button",{onClick:t=>H(s,t),className:"text-amber-400/60 hover:text-amber-400 transition-colors p-2",title:"Ver detalhes",children:e.jsx(F,{size:16})})]}),!c&&e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-700/50 text-xs",children:r.isOnCooldown?e.jsx("span",{className:"text-red-400 font-medium",children:"Clique para reduzir cooldown"}):e.jsx("span",{className:"text-green-400 font-medium",children:"Clique para usar"})})]})]},r.id||`skill-${s}`))})]})]})]}),a!==null&&a<o.length&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{ref:j,className:"bg-gray-900 border border-gray-700 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-indigo-600/20 border-b border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-600/20 rounded-lg border border-purple-500/30",children:e.jsx(q,{size:28,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold font-storm-gust text-amber-100",children:o[a]?.name}),e.jsx("p",{className:"text-amber-400 text-sm font-medieval",children:"Detalhes da Habilidade"})]})]}),e.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-gray-800 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(D,{size:24})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Custo"}),e.jsx("div",{className:"text-2xl font-medieval font-bold text-amber-400",children:o[a]?.cost})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Cooldown"}),e.jsxs("div",{className:"text-2xl font-medieval font-bold text-amber-400 flex items-center gap-2",children:[e.jsx(y,{size:20,className:"text-amber-400"}),o[a]?.maxCooldown||o[a]?.cooldown||0," Turnos"]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Status"}),e.jsx("div",{className:`text-lg font-bold ${o[a]?.isOnCooldown?"text-red-400":"text-green-400"}`,children:o[a]?.isOnCooldown?`Recarga: ${o[a]?.currentCooldown||0}T`:"Disponível"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-800/30 rounded-lg p-6 border border-gray-700 border-l-4 border-l-purple-500",children:[e.jsx("h3",{className:"text-lg font-medium font-medieval text-amber-100 mb-4 uppercase tracking-wider",children:"Descrição"}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-amber-200/90 font-medieval leading-relaxed text-base break-words word-break-break-word overflow-wrap-break-word hyphens-auto",style:{whiteSpace:"pre-line",wordBreak:"break-word",overflowWrap:"break-word"},children:o[a]?.description})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>{const r=a;d(null),o[r]?.isOnCooldown?E(r):S(r)},className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${o[a]?.isOnCooldown?"bg-orange-600 hover:bg-orange-700 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:o[a]?.isOnCooldown?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:16}),"Reduzir Cooldown"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:16}),"Usar Habilidade"]})}),e.jsxs("button",{onClick:()=>{const r=a;d(null),C(r)},className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg font-medium transition-colors flex items-center gap-2",children:[e.jsx(v,{size:16}),"Editar"]}),e.jsxs("button",{onClick:()=>{const r=a;confirm(`Deseja realmente deletar "${o[r]?.name}"?`)&&(d(null),z(r))},className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",title:"Excluir",children:[e.jsx(I,{size:16}),"Excluir"]})]})]})})]})})]})}export{se as default};
