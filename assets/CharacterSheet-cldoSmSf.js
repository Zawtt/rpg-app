import{c as Q,R as F,u as ne,r as n,a as ie,j as a,C as Y,b as oe,d as ce}from"./index-Bu_78DCR.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],me=Q("pin",de);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ge=Q("upload",ue),l=F.memo(({id:p,label:h,value:m,onChange:f,type:y="text",className:b="",placeholder:s="",maxLength:j,min:u,max:d,required:C=!1,fieldName:g,...w})=>{const[i,x]=n.useState(""),[A,R]=n.useState(!1),{validateCharacterField:v}=oe(),k=ce(m,300);F.useEffect(()=>{if(A&&g){const o=v(g,k);x(o.isValid?"":o.error)}},[k,A,g,v]);const D=n.useCallback(()=>{if(R(!0),g){const o=v(g,m);x(o.isValid?"":o.error)}},[m,g,v]),M=n.useCallback(o=>{const E=o.target.value;if(y==="number"&&E!==""){const N=Number(E);if(isNaN(N)){x("Deve ser um número válido");return}if(u!==void 0&&N<u){x(`Valor mínimo: ${u}`);return}if(d!==void 0&&N>d){x(`Valor máximo: ${d}`);return}i&&x("")}f(o)},[f,y,u,d,i]);return a.jsxs("div",{className:"relative",children:[a.jsxs("label",{htmlFor:p,className:`block text-sm font-bold font-medieval mb-1 ${i?"text-red-400":"text-white"}`,children:[h,":",C&&a.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),a.jsx("input",{id:p,type:y,value:m,onChange:M,onBlur:D,className:`
          w-full p-2 rounded-md focus:outline-none focus:ring-2 transition-all duration-200 font-medieval
          ${i?"border-2 border-red-500 bg-red-950/20 focus:ring-red-500":"border border-amber-600/50 bg-gray-900 focus:ring-purple-500"}
          text-white placeholder-gray-400/60 ${b}
        `,placeholder:s,maxLength:j,min:u,max:d,"aria-invalid":i?"true":"false","aria-describedby":i?`${p}-error`:void 0,...w}),i&&a.jsxs("div",{id:`${p}-error`,className:"flex items-center gap-1 mt-1 text-red-400 text-xs",role:"alert",children:[a.jsx(Y,{size:12}),i]})]})});l.displayName="ValidatedInput";function xe({onFixAttributes:p}){const h=ne(),[m,f]=n.useState(!1),[y,b]=n.useState(""),{characterData:s,updateCharacterData:j,showToast:u}=ie(),d=n.useCallback((e,t="info")=>{u?u(e,t):(console.log(`${t.toUpperCase()}: ${e}`),alert(e))},[u]),C=n.useMemo(()=>({name:s?.name||"",race:s?.race||"",height:s?.height||"",age:s?.age||"",homeland:s?.homeland||"",religion:s?.religion||"",fear:s?.fear||"",hp:s?.hp||"",mana:s?.mana||"",aura:s?.aura||"",er:s?.er||"",en:s?.en||"",ep:s?.ep||"",ea:s?.ea||"",vigor:s?.vigor||"",strength:s?.strength||"",dexterity:s?.dexterity||"",agility:s?.agility||"",rarity:s?.rarity||"",animalHandling:s?.animalHandling||"",stealth:s?.stealth||"",adaptability:s?.adaptability||"",perception:s?.perception||"",intuition:s?.intuition||"",athletics:s?.athletics||"",initiative:s?.initiative||"",successBoxes:s?.successBoxes||[!1,!1,!1,!1],failureBoxes:s?.failureBoxes||[!1,!1,!1,!1],characterImage:s?.characterImage||""}),[s]),{name:g,race:w,height:i,age:x,homeland:A,religion:R,fear:v,hp:k,mana:D,aura:M,er:o,en:E,ep:N,ea:L,vigor:S,strength:V,dexterity:P,agility:G,rarity:U,animalHandling:z,stealth:O,adaptability:H,perception:_,intuition:q,athletics:J,initiative:W,successBoxes:$,failureBoxes:B,characterImage:X}=C,r=n.useCallback((e,t)=>{if(typeof j!="function"){console.error("updateCharacterData não está disponível no contexto");return}try{j({[e]:t})}catch(T){console.error("Erro ao atualizar campo:",T),d("Erro ao atualizar campo","error")}},[j,d]),ee=n.useCallback(async e=>{const t=e.target.files[0];if(!t)return;const T=5*1024*1024,I=["image/jpeg","image/png","image/gif","image/webp"];if(t.size>T){b("Imagem muito grande (máximo 5MB)");return}if(!I.includes(t.type)){b("Tipo de arquivo não suportado (apenas JPEG, PNG, GIF, WebP)");return}f(!0),b("");try{const c=new FileReader;c.onloadend=()=>{r("characterImage",c.result),f(!1)},c.onerror=()=>{b("Erro ao carregar imagem"),f(!1)},c.readAsDataURL(t)}catch{b("Erro ao processar imagem"),f(!1)}},[r]),ae=n.useCallback(e=>{const t=[...$];t[e]=!t[e],r("successBoxes",t)},[$,r]),re=n.useCallback(e=>{const t=[...B];t[e]=!t[e],r("failureBoxes",t)},[B,r]),Z=n.useCallback(()=>{const e=[],t={hp:{name:"HP",color:"text-red-400"},mana:{name:"MANA",color:"text-blue-400"},aura:{name:"AURA",color:"text-white"},er:{name:"ER",color:"text-cyan-300"},en:{name:"EN",color:"text-red-800"},ep:{name:"EP",color:"text-green-400"},ea:{name:"EA",color:"text-yellow-400"}};if(["hp","mana","aura","er","en","ep","ea"].forEach(I=>{const c=C[I];if(c!==""&&c!==null&&c!==void 0){const K=parseFloat(c);e.push({name:t[I].name,value:isNaN(K)?c:K,color:t[I].color})}}),e.length===0){d("Nenhum atributo válido para fixar","warning");return}p&&p(e)},[C,p,d]),se=n.useMemo(()=>a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(l,{id:"name",label:"NOME",value:g,onChange:e=>r("name",e.target.value),fieldName:"name",maxLength:50,placeholder:"Nome do personagem"}),a.jsx(l,{id:"religion",label:"RELIGIÃO",value:R,onChange:e=>r("religion",e.target.value),maxLength:30,placeholder:"Religião"}),a.jsx(l,{id:"height",label:"ALTURA",value:i,onChange:e=>r("height",e.target.value),maxLength:20,placeholder:"1,75m"}),a.jsx(l,{id:"race",label:"RAÇA",value:w,onChange:e=>r("race",e.target.value),maxLength:30,placeholder:"Raça"}),a.jsx(l,{id:"age",label:"IDADE",type:"number",value:x,onChange:e=>r("age",e.target.value),min:0,max:99999,placeholder:"Anos"}),a.jsx(l,{id:"fear",label:"MEDO",value:v,onChange:e=>r("fear",e.target.value),maxLength:50,placeholder:"Medo"}),a.jsx("div",{className:"col-span-1 sm:col-span-2",children:a.jsx(l,{id:"homeland",label:"REINO NATAL",value:A,onChange:e=>r("homeland",e.target.value),maxLength:50,placeholder:"origem"})})]}),[g,R,i,w,x,v,A,r]),te=n.useMemo(()=>a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-lg",children:[a.jsx(l,{id:"hp",label:"HP",type:"number",value:k,onChange:e=>r("hp",e.target.value),fieldName:"hp",min:0,max:999999,className:"border-red-500 focus:ring-red-500"}),a.jsx(l,{id:"aura",label:"AURA",type:"number",value:M,onChange:e=>r("aura",e.target.value),fieldName:"aura",min:0,max:999999,className:"border-white focus:ring-gray-400"}),a.jsx(l,{id:"mana",label:"MANA",type:"number",value:D,onChange:e=>r("mana",e.target.value),fieldName:"mana",min:0,max:999999,className:"border-blue-600 focus:ring-blue-600"}),a.jsx(l,{id:"en",label:"EN",type:"number",value:E,onChange:e=>r("en",e.target.value),min:0,max:999999,className:"border-red-800 focus:ring-red-800"}),a.jsx(l,{id:"ep",label:"EP",type:"number",value:N,onChange:e=>r("ep",e.target.value),min:0,max:999999,className:"border-green-500 focus:ring-green-500"}),a.jsx(l,{id:"ea",label:"EA",type:"number",value:L,onChange:e=>r("ea",e.target.value),min:0,max:999999,className:"border-yellow-500 focus:ring-yellow-500"}),a.jsx(l,{id:"er",label:"ER",type:"number",value:o,onChange:e=>r("er",e.target.value),min:0,max:999999,className:"border-sky-500 focus:ring-sky-500"}),a.jsx("div",{className:"col-span-full sm:col-span-2 md:col-span-1 flex items-end justify-center",children:a.jsxs("button",{onClick:Z,className:`
            inline-flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg border border-red-500/30 
            transform transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500/50 
            focus:ring-offset-2 focus:ring-offset-gray-900 uppercase tracking-wider text-sm font-bold
            ${h.classes.button} ${h.classes.text}
          `,"aria-label":"Fixar atributos principais na barra lateral",children:[a.jsx(me,{size:16,className:"text-red-200"}),"FIXAR STATS"]})})]}),[k,M,D,E,N,L,o,r,Z,h.classes]),le=n.useMemo(()=>a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-lg",children:[a.jsx(l,{id:"vigor",label:"VIGOR",type:"number",value:S,onChange:e=>r("vigor",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"stealth",label:"FURTIVIDADE",type:"number",value:O,onChange:e=>r("stealth",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"strength",label:"FORÇA",type:"number",value:V,onChange:e=>r("strength",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"adaptability",label:"ADAPTABILIDADE",type:"number",value:H,onChange:e=>r("adaptability",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"dexterity",label:"DESTREZA",type:"number",value:P,onChange:e=>r("dexterity",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"perception",label:"PERCEPÇÃO",type:"number",value:_,onChange:e=>r("perception",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"agility",label:"AGILIDADE",type:"number",value:G,onChange:e=>r("agility",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"intuition",label:"INTUIÇÃO",type:"number",value:q,onChange:e=>r("intuition",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"rarity",label:"RARIDADE",type:"number",value:U,onChange:e=>r("rarity",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"athletics",label:"ATLETISMO",type:"number",value:J,onChange:e=>r("athletics",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"animalHandling",label:"LIDAR COM ANIMAIS",type:"number",value:z,onChange:e=>r("animalHandling",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"}),a.jsx(l,{id:"initiative",label:"INICIATIVA",type:"number",value:W,onChange:e=>r("initiative",e.target.value),min:0,max:99999,className:"border-pink-500 focus:ring-pink-500"})]}),[S,O,V,H,P,_,G,q,U,J,z,W,r]);return a.jsxs("div",{className:`${h.classes.card} ${h.classes.cardBorder} backdrop-blur-sm rounded-lg border p-6 relative z-10`,children:[a.jsx("section",{className:"mb-8 p-4 bg-gray-800/60 rounded-md border border-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-lg",children:[a.jsxs("div",{className:"md:col-span-1 flex flex-col items-center justify-center p-4 bg-gray-900 border border-gray-700 rounded-md",children:[a.jsx("div",{className:"w-40 h-40 bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden border border-gray-600 mb-4 relative",children:m?a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"})}):X?a.jsx("img",{src:X,alt:"Personagem",className:"w-full h-full object-cover",onError:()=>b("Erro ao carregar imagem")}):a.jsx("span",{className:"text-gray-400 text-sm text-center px-2",children:"SUA IMAGEM"})}),a.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",className:"hidden",onChange:ee,disabled:m,"aria-describedby":"image-help"}),a.jsxs("label",{htmlFor:"imageUpload",className:`
                flex items-center gap-2 px-4 py-2 rounded-md shadow-md cursor-pointer 
                transition-all duration-200 font-bold text-sm
                ${m?"bg-gray-600 cursor-not-allowed opacity-50":"bg-orange-600 hover:bg-orange-700 hover:scale-105"} 
                text-white focus-within:ring-2 focus-within:ring-orange-500/50
              `,children:[a.jsx(ge,{size:16}),a.jsx("span",{className:"font-medieval",children:m?"CARREGANDO...":"CARREGAR IMAGEM"})]}),a.jsx("div",{id:"image-help",className:"text-xs text-gray-500 mt-2 text-center",children:"Máximo 5MB • JPEG, PNG, GIF, WebP"}),y&&a.jsxs("div",{className:"flex items-center gap-1 mt-2 text-red-400 text-xs",role:"alert",children:[a.jsx(Y,{size:12}),y]})]}),se]})}),a.jsxs("section",{className:"mb-8 p-4 bg-gray-800/60 rounded-md border border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold font-storm-gust text-amber-100 mb-4 uppercase tracking-wider",children:"Status Principais"}),te]}),a.jsxs("section",{className:"mb-8 p-4 bg-gray-800/60 rounded-md border border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold font-medieval-title text-amber-100 mb-4 uppercase tracking-wider",children:"Atributos Secundários"}),le]}),a.jsxs("section",{className:"mb-8 p-4 bg-gray-800/60 rounded-md border border-gray-700 text-center",children:[a.jsx("h4",{className:"text-2xl font-medium font-storm-gust text-amber-300 mb-4 uppercase tracking-wider",children:"BALANÇA DA VIDA"}),a.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-semibold text-green-400 mb-2",children:"Sucesso:"}),a.jsx("div",{className:"flex space-x-2",role:"group","aria-label":"Caixas de sucesso",children:$.map((e,t)=>a.jsx("button",{onClick:()=>ae(t),className:`
                    w-8 h-8 rounded-full border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500/50
                    ${e?"bg-green-500 border-green-700 transform scale-110":"bg-gray-700 border-gray-500 hover:bg-gray-600 hover:scale-105"}
                  `,"aria-label":`Caixa de sucesso ${t+1} ${e?"marcada":"desmarcada"}`,"aria-pressed":e},`success-${t}`))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-semibold text-red-400 mb-2",children:"Fracasso:"}),a.jsx("div",{className:"flex space-x-2",role:"group","aria-label":"Caixas de fracasso",children:B.map((e,t)=>a.jsx("button",{onClick:()=>re(t),className:`
                    w-8 h-8 rounded-full border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-500/50
                    ${e?"bg-red-500 border-red-700 transform scale-110":"bg-gray-700 border-gray-500 hover:bg-gray-600 hover:scale-105"}
                  `,"aria-label":`Caixa de fracasso ${t+1} ${e?"marcada":"desmarcada"}`,"aria-pressed":e},`failure-${t}`))})]})]}),a.jsx("div",{className:"mt-4 text-sm text-gray-400",children:a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsxs("span",{className:"text-green-400",children:["Sucessos: ",$.filter(Boolean).length,"/3"]}),a.jsx("span",{className:"text-gray-600",children:"•"}),a.jsxs("span",{className:"text-red-400",children:["Fracassos: ",B.filter(Boolean).length,"/3"]})]})})]}),!1]})}const be=F.memo(xe);export{be as default};
