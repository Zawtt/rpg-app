import{c as S,u as Q,a as B,r as s,j as e,X as M}from"./index-DK03xTCf.js";import{S as V,P as E,E as _}from"./settings-BljueQpT.js";import{P as z}from"./plus-WixbrfQM.js";import{T as F}from"./trash-2-B0sGE8W4.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],K=S("hash",H);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],q=S("package",U);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],D=S("search",X);function ee({inventoryItems:r,setInventoryItems:c}){const{theme:Y}=Q(),{showNotification:d}=B(),[l,m]=s.useState({name:"",quantity:1,description:""}),[o,g]=s.useState(null),[h,R]=s.useState(""),[n,p]=s.useState(null),[u,A]=s.useState(!1),b=s.useRef(null),f=s.useRef(null),L=s.useMemo(()=>r.reduce((a,t)=>a+t.quantity,0),[r]),y=s.useMemo(()=>r.filter(a=>a.name.toLowerCase().includes(h.toLowerCase())),[r,h]);s.useEffect(()=>{const a=i=>{b.current&&!b.current.contains(i.target)&&x()},t=i=>{i.key==="Escape"&&x()};return n!==null&&(f.current=document.activeElement,document.addEventListener("mousedown",a),document.addEventListener("keydown",t),setTimeout(()=>{b.current?.querySelector('button, input, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},100)),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("keydown",t)}},[n]);const x=s.useCallback(()=>{p(null),f.current&&f.current.focus()},[]),I=s.useCallback(()=>{if(!l.name.trim())return d("Nome do item é obrigatório","error"),!1;const a=parseInt(l.quantity);return isNaN(a)||a<1?(d("Quantidade deve ser um número maior que 0","error"),!1):!0},[l,d]),j=s.useCallback(()=>{if(!I())return;const a=parseInt(l.quantity)||1;o!==null?(c(t=>t.map((i,w)=>w===o?{...i,name:l.name.trim(),quantity:a,description:l.description.trim()}:i)),g(null),d("Item atualizado com sucesso!","success")):(c(t=>[...t,{id:Date.now(),name:l.name.trim(),quantity:a,description:l.description.trim()}]),d("Item adicionado com sucesso!","success")),m({name:"",quantity:1,description:""})},[l,o,I,c,d]),T=s.useCallback(a=>{g(a);const t=r[a];m({name:t.name,quantity:t.quantity,description:t.description||""}),p(null)},[r]),N=s.useCallback(()=>{g(null),m({name:"",quantity:1,description:""}),A(!1)},[]),v=s.useCallback(a=>{c(t=>t.filter(i=>i.id!==a)),n!==null&&r[n]?.id===a&&x(),d("Item removido com sucesso!","success")},[n,r,c,d,x]),k=s.useCallback((a,t)=>{const i=parseInt(t);isNaN(i)||i<=0?v(a):c(w=>w.map(C=>C.id===a?{...C,quantity:i}:C))},[v,c]),P=s.useCallback((a,t)=>{t?.stopPropagation(),p(a)},[]),$=s.useCallback(a=>{a.key==="Enter"&&j()},[j]),O=s.useCallback(()=>{A(a=>!a),o!==null&&N()},[o,N]);return e.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-lg border border-gray-800 shadow-2xl",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{size:24,className:"text-amber-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-storm-gust text-amber-100",children:"INVENTORY"}),e.jsx("div",{className:"w-20 h-0.5 bg-amber-500 mt-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:O,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medieval text-sm transition-all duration-200 ${u?"bg-amber-600/20 text-amber-400 border border-amber-500/50":"bg-gray-700/50 text-gray-400 border border-gray-600/50 hover:bg-gray-600/50 hover:text-gray-300"}`,"aria-pressed":u,children:[e.jsx(V,{size:16}),u?"Sair do Modo Edição":"Modo Edição"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medieval text-amber-400",children:"Total Items"}),e.jsx("div",{className:"text-xl font-medieval font-bold text-amber-400",children:L})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/80 rounded-lg border border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o!==null?e.jsx(E,{size:20,className:"text-amber-500"}):e.jsx(z,{size:20,className:"text-amber-400"}),e.jsx("h4",{className:"text-lg font-storm-gust text-amber-100",children:o!==null?"EDITAR ITEM":"ADICIONAR ITEM"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Nome do Item"}),e.jsx("input",{type:"text",value:l.name,onChange:a=>m({...l,name:a.target.value}),onKeyPress:$,className:"w-full px-4 py-3 font-medieval bg-gray-800/80 border border-amber-600/50 rounded text-amber-100 focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 transition-colors text-sm placeholder-amber-400/60",placeholder:"Long Sword, Health Potion...","aria-label":"Nome do item"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Quantidade"}),e.jsx("input",{type:"number",value:l.quantity,onChange:a=>m({...l,quantity:a.target.value}),min:"1",className:"w-full px-4 py-3 font-medieval bg-gray-800/80 border border-amber-600/50 rounded text-amber-100 focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 transition-colors text-sm","aria-label":"Quantidade do item"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Descrição (Opcional)"}),e.jsx("textarea",{value:l.description,onChange:a=>m({...l,description:a.target.value}),rows:"3",className:"w-full px-4 py-3 font-medieval bg-gray-800/80 border border-amber-600/50 rounded text-amber-100 focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 transition-colors text-sm resize-none placeholder-amber-400/60",style:{whiteSpace:"pre-line",wordBreak:"break-word"},placeholder:"Descrição detalhada do item, efeitos, etc...","aria-label":"Descrição do item"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-5",children:[e.jsxs("button",{onClick:j,className:"flex-1 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-medieval font-medium rounded transition-colors flex items-center justify-center gap-2",children:[e.jsx(z,{size:16}),o!==null?"ATUALIZAR ITEM":"ADICIONAR AO INVENTÁRIO"]}),o!==null&&e.jsx("button",{onClick:N,className:"px-4 py-3 bg-gray-700 hover:bg-gray-600 text-amber-400 font-medieval rounded transition-colors","aria-label":"Cancelar edição",children:e.jsx(M,{size:16})})]})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Buscar Itens"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-amber-400"}),e.jsx("input",{type:"text",value:h,onChange:a=>R(a.target.value),className:"w-full pl-10 pr-4 py-3 font-medieval bg-gray-800/80 border border-amber-600/50 rounded text-amber-100 focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 transition-colors text-sm placeholder-amber-400/60",placeholder:"Buscar seus itens...","aria-label":"Buscar itens no inventário"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medieval-title text-amber-100",children:"SEUS ITENS"}),e.jsxs("div",{className:"text-sm font-medieval text-amber-400",children:[y.length," de ",r.length," itens"]})]}),r.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx(q,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Inventário vazio"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Adicione seu primeiro item acima"})]}):y.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx(D,{size:32,className:"text-gray-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum item corresponde à sua busca"})]}):e.jsx("div",{className:"space-y-3",children:y.map(a=>{const t=r.findIndex(i=>i.id===a.id);return e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-amber-500/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"text-lg font-medieval font-medium text-amber-100 mb-1",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medieval text-amber-400",children:[e.jsx(K,{size:12}),e.jsxs("span",{children:["Quantidade: ",a.quantity]})]}),a.description&&e.jsx("div",{className:"mt-2 text-sm font-medieval text-amber-300/80 italic",style:{wordBreak:"break-word"},children:a.description.length>50?`${a.description.substring(0,50)}...`:a.description})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(a.id,a.quantity-1),className:"w-8 h-8 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded flex items-center justify-center transition-colors","aria-label":`Diminuir quantidade de ${a.name}`,children:"-"}),e.jsx("span",{className:"text-lg font-medieval font-bold text-amber-400 min-w-[2rem] text-center",children:a.quantity}),e.jsx("button",{onClick:()=>k(a.id,a.quantity+1),className:"w-8 h-8 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded flex items-center justify-center transition-colors","aria-label":`Aumentar quantidade de ${a.name}`,children:"+"})]}),e.jsx("button",{onClick:i=>P(t,i),className:"p-2 text-gray-500 hover:text-blue-400 transition-colors rounded",title:"Ver detalhes","aria-label":`Ver detalhes de ${a.name}`,children:e.jsx(_,{size:16})}),u&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T(t),className:"p-2 text-gray-500 hover:text-amber-400 transition-colors rounded",title:"Editar item","aria-label":`Editar ${a.name}`,children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:()=>v(a.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:"Remover item","aria-label":`Remover ${a.name}`,children:e.jsx(F,{size:16})})]})]})]})},a.id)})})]})]}),n!==null&&r[n]&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{ref:b,className:"bg-gray-900 border border-gray-700 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden animate-in fade-in zoom-in duration-300",role:"dialog","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-600/20 to-orange-600/20 border-b border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-600/20 rounded-lg border border-amber-500/30",children:e.jsx(q,{size:28,className:"text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h2",{id:"modal-title",className:"text-2xl font-storm-gust font-bold text-amber-100",children:r[n].name}),e.jsx("p",{className:"text-amber-400 font-medieval text-sm",children:"Detalhes do Item"})]})]}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors text-gray-400 hover:text-white","aria-label":"Fechar modal",children:e.jsx(M,{size:24})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"Quantidade"}),e.jsx("div",{className:"text-2xl font-medieval font-bold text-amber-400",children:r[n].quantity})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medieval font-medium text-amber-400 uppercase tracking-wider mb-2",children:"ID do Item"}),e.jsxs("div",{className:"text-lg font-medieval text-amber-300",children:["#",r[n].id]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-800/30 rounded-lg p-6 border border-gray-700 border-l-4 border-l-amber-500",children:[e.jsx("h3",{className:"text-lg font-storm-gust text-amber-100 mb-4 uppercase tracking-wider",children:"Descrição"}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{id:"modal-description",className:"text-amber-200/90 font-medieval leading-relaxed text-base",style:{whiteSpace:"pre-line",wordBreak:"break-word"},children:r[n].description||"Nenhuma descrição disponível para este item."})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsxs("button",{onClick:()=>{const a=r[n];x(),k(a.id,a.quantity+1)},className:"flex-1 py-3 px-4 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(z,{size:16}),"Adicionar Quantidade"]}),e.jsxs("button",{onClick:()=>T(n),className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg font-medium transition-colors flex items-center gap-2",children:[e.jsx(E,{size:16}),"Editar"]})]})]})})]})}),e.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes zoom-in {
          from { transform: scale(0.95); }
          to { transform: scale(1); }
        }
        .animate-in {
          animation: fade-in 0.3s ease-out, zoom-in 0.3s ease-out;
        }
      `})]})}export{ee as default};
